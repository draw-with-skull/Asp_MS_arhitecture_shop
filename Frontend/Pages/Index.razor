@page "/"
@using Common;

<PageTitle>Home</PageTitle>

<div>
	@foreach (List<Product> list in Items)
	{
		<div class="row">
		@foreach(Product prod in list)
		{
			if(prod.Price!=0){
			<Frontend.Shared.Components.Card Name="@prod.Name" Description="@prod.Description" Discount="@prod.Discount" Price="prod.Price"/>
			}
		}
		</div>
	}

	
		
			
		
	
	@*<button @onclick="async()=>await GetData()"></button>*@

</div>
@code{
	protected override async Task OnInitializedAsync()
	{
		await GetData();
	}
	List<List<Product>>Items=new();
	
	public async  Task GetData()
	{

		{
			try
			{
				using var client = new HttpClient();
				List<Product>Data = await client.GetFromJsonAsync<List<Product>>(Endpoints.STORAGE.GET_ITEMS_OUT);

				Items.Add(new List<Product>(Data.GetRange(0, Data.Count * ( 1/ 3))));
				Items.Add(new List<Product>(Data.GetRange(Data.Count * (1 / 3), Data.Count * (2 / 3))));
				Items.Add(new List<Product>(Data.GetRange(Data.Count * (2 / 3), Data.Count )));
			}
			catch (Exception)
			{
				
			}
		}
	}
}
